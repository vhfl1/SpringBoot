<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.farmstory.dao.ArticleDAO">

    <insert id="insertArticle" useGeneratedKeys="true" keyProperty="no">
        insert into `board_article` set
        `title`=#{title},
        `content`=#{content},
        `uid`=#{uid},
        `regip`=#{regip},
        `rdate`=NOW()
    </insert>
    <insert id="insertFile">
        insert into `board_file` set
        `parent`=#{parent},
        `newName`=#{newName},
        `oriName`=#{oriName},
        `rdate`=NOW();
    </insert>
    <select id="selectArticles" resultType="kr.co.farmstory.vo.ArticleVO">
        select a.`no`, a.`title`, a.`uid`, b.`nick`, a.`rdate`, a.`hit`, a.`comment` from `board_article` as a join `board_user` as b on a.`uid`=b.`uid`;
    </select>
    <select id="selectArticle" resultType="kr.co.farmstory.vo.ArticleVO">
        select
    </select>
    <update id="updateArticle">
        update `board_article` set `title`,`content`,`rdate`= NOW() where `no`=?;
    </update>
    <delete id="deleteArticle">
        delete * from `board_article` where `no`=?;
    </delete>
</mapper>